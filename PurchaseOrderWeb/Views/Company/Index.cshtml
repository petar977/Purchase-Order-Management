@using DataLayer.Models
@using Po.Common.Models
@model List<CompanyDto>

<div class="container p-0 mb-2">
    <div class="card-header pt-3">
        <div class="row">
            <div class="col-6"><h2>Companies</h2></div>
            <div class="col-6 text-end">
                <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#exampleModal">
                    <i class="bi bi-plus-circle"></i> Add Company
                </button>               
            </div>
        </div>
    </div>
    <div class="card-body">
        <ul class="nav nav-tabs" role="tablist">
            <li class="nav-item" role="presentation">
                <a class="nav-link active" data-bs-toggle="tab" href="#home" aria-selected="true" role="tab">Active</a>
            </li>
            <li class="nav-item" role="presentation">
                <a class="nav-link" data-bs-toggle="tab" href="#profile" aria-selected="false" role="tab" tabindex="-1">Inactive</a>
            </li>
        </ul>
        <div id="myTabContent" class="tab-content">
            <div class="tab-pane fade active show" id="home" role="tabpanel">
                <div class="mb-3 row p-1">
                    <div class=" table-responsive">
                        <table id="orderTable" class="table table-hover table-striped" style="width:100%;">
                            <thead>
                                <tr>
                                    <th>Company Name:</th>
                                    <th>Send Email To:</th>
                                    <th>Status:</th>
                                    <th>Address:</th>
                                    <th>City:</th>
                                    <th>Zip Code:</th>
                                    <th></th>
                                </tr>
                            </thead>
                            <tbody>
                                @foreach (var i in Model)
                                {
                                    if (i.Status == Status.Active)
                                    {
                                        <tr>
                                            <td class="align-middle">
                                                @i.Name
                                            </td>
                                            <td class ="align-middle">@i.Email</td>
                                            <td class="align-middle">@i.Status</td>
                                            <td class="align-middle">@i.Address</td>
                                            <td class="align-middle">@i.City</td>
                                            <td class="align-middle">@i.ZipCode</td>
                                            <td class="align-middle">
                                                <div class="btn-group">
                                                    <button type="button" onclick="getCompanyEdit(@i.Id)" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#edit-modal" title="Edit"><i class="bi bi-pencil-square"></i></button>
                                                    <button type="button" onclick="changeStatus(@i.Id)" class="btn btn-danger ms-1" title="Change Status to Inactive"><i class="bi bi-toggles"></i></button>
                                                </div>
                                            </td>
                                        </tr>
                                    }
                                }
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <div class="tab-pane fade" id="profile" role="tabpanel">
                <div class="mb-3 row p-1">
                    <div class="col table-responsive">
                        <table id="orderTable" class="table table-hover table-striped">
                            <thead>
                                <tr>
                                    <th>Company Name:</th>
                                    <th>Send Email To:</th>
                                    <th>Status:</th>
                                    <th>Address:</th>
                                    <th>City:</th>
                                    <th>Zip Code:</th>
                                    <th></th>
                                </tr>
                            </thead>
                            <tbody>
                                @foreach (var i in Model)
                                {
                                    if (i.Status == Status.Inactive)
                                    {
                                        <tr>
                                            <td>
                                                @i.Name
                                            </td>
                                            <td class="align-middle">@i.Email</td>
                                            <td class="align-middle">@i.Status</td>
                                            <td class="align-middle">@i.Address</td>
                                            <td class="align-middle">@i.City</td>
                                            <td class="align-middle">@i.ZipCode</td>
                                            <td class="align-middle">
                                                <div class="btn-group">
                                                    <button type="button" onclick="getCompanyEdit(@i.Id)" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#edit-modal" title="Edit"><i class="bi bi-pencil-square"></i></button>
                                                    <button type="button" onclick="changeStatus(@i.Id)" class="btn btn-success ms-1" title="Change Status to Active"><i class="bi bi-toggles"></i></button>

                                                </div>
                                            </td>
                                        </tr>
                                    }
                                }
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

    </div>
</div>
<partial name="_companyAddPartial" model="new CompanyDto()" />
<partial name="_companyEditPartial" model="new CompanyDto()">

@section Scripts {
    <script src="~/js/company.js"></script>
    <script src="~/js/moment.js"></script>
    <script>
 
            
    </script>
    
}
