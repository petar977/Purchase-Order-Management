@using Po.Common.Models
@model AddUserViewModel
<form method="post" class="p-0 " id="forma">

    <div class="card-header pt-3">
        <h2>Create User</h2>
    </div>
    <div asp-validation-summary="ModelOnly" class="text-danger" id="asd" role="alert"></div>
    <div class="card-body">
        <div class="form-floating mb-3">
            <input asp-for="Email" class="form-control" autocomplete="username" aria-required="true" placeholder="name@example.com" />
            <label asp-for="Email">Email</label>
            <span asp-validation-for="Email" class="text-danger"></span>
        </div>
        <div class="form-floating mb-3">
            <input asp-for="Password" class="form-control" autocomplete="new-password" aria-required="true" placeholder="password" />
            <label asp-for="Password">Password</label>
            <span asp-validation-for="Password" class="text-danger"></span>
        </div>
        <div class="form-floating mb-3">
            <input asp-for="ConfirmPassword" class="form-control" autocomplete="new-password" aria-required="true" placeholder="password" />
            <label asp-for="ConfirmPassword">Confirm Password</label>
            <span asp-validation-for="ConfirmPassword" class="text-danger"></span>
        </div>
        <h3>Companies</h3>

        @for (int i = 0; i < Model.Companies.Count(); i++)
        {
            @if(Model.Companies[i].Status == DataLayer.Models.Status.Active)
            {
                <div class="form-check m-1">
 @*                    <input type="hidden" asp-for="@Model.Companies[i].CompanyId" />
                    <input type="hidden" asp-for="@Model.Companies[i].CompanyName" /> *@
                    <input type="checkbox" name="Company" value="@Model.Companies[i].CompanyId" class="form-check-input checkbox" />
                    <label class="form-check-label" asp-for="@Model.Companies[i].Selected">
                        @Model.Companies[i].CompanyName
                    </label>
                </div>
            }
        }
        <h3>Roles</h3>
        @for (int i = 0; i < Model.Roles.Count; i++)
        {
            <div class="form-check m-1">
                <input type="hidden" asp-for="@Model.Roles[i].RoleId" />
                <input type="hidden" asp-for="@Model.Roles[i].RoleName" />
                <input asp-for="@Model.Roles[i].Selected" class="form-check-input" />
                <label class="form-check-label" asp-for="@Model.Roles[i].Selected">
                    @Model.Roles[i].RoleName
                </label>
            </div>
        }
    </div>
    <div class="card-footer">
        <button type="submit" class="btn btn-primary" id="create"
               style="width:auto">Create</button>
        <a asp-action="Index" class="btn btn-danger" style="width:auto">Cancel</a>
    </div>

</form>
@section Scripts {
    <script src="~/js/company.js"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            // $("#create").click(function () {
            //     if ($("#forma").valid()) {
            //         $("#forma").submit();
            //     } else {
            //         return false;
            //     }
            // })
            // $("#forma").on("submit", function (e) {
            //     e.preventDefault();
            //     createUser($("#forma").serialize())

            // })
        })

    </script>
}